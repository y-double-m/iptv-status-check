<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV 서비스 이상 감지</title>
    <script src="https://code.jquery.com/jquery-3.6.3.slim.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <style>
        a {
            text-decoration-line: none;
            padding: 10px;
        }
    </style>
</head>
<body>
    <script type="text/javascript">
        
        setInterval('window.location.reload()', 60000);
        function sendRequest() {
            var xhr = new XMLHttpRequest();
            xhr.open("get", "{{url_for('request_code')}}");
            xhr.onreadystatechange = function() {
                if(xhr.status == 200 && xhr.readyState == 4) {
                    var d1 = document.getElementById("log1");
                    var d2 = document.getElementById("log2");
                }
            }
            xhr.send();
        }
        sendRequest();
    </script>

    <div class="d-block fw-bold" style="font-size:30px; padding:10px">IPTV 서비스 상태</div>
    <div style="text-align : center;">
        <img src="https://www.lgcns.com/wp-content/uploads/2021/11/99FC7C375CCBD7CD1B-1.png" width="1920" height="500">
    </div>
    <br>
    <br>
    <table class="table table-bordered">
        <thead class="table-secondary">
          <tr>
            <th scope="col" class="fs-3 fw-semibold">IPTV Service</th>
            <th scope="col" class="fs-4 fw-semibold">Connection Status</th>
            <th scope="col" class="fs-4 fw-semibold">HTTP Status Code</th>
            <th scope="col" class="fs-4 fw-semibold">Case</th>
          </tr>
        </thead>
        <tbody class="table-group-divider">
          <tr>
            <th scope="row">
                <a href="{{url1}}" class="fs-4 fw-semibold" onclick="window.open(this.href); return false">멀티캐스트 앱 배포</a>
            </th>
            <td>
                {% if state1 == 200 %}
                <div class="color d-grid gap-2 col-6"> 
                    <button type="button" class="btn btn-success btn-lg">Success</button>
                </div>
                {% else %}
                <div class="color d-grid gap-2 col-6">
                    <button type="button" class="btn btn-danger btn-lg">Warning</button>
                </div>
                {% endif %}
            </td>
            <td class="fs-5 fw-semibold">{{state1}}</td>
            <td class="fs-5 fw-semibold">요청이 성공적으로 수행되었습니다</td>
          </tr>
          <tr>
            <th scope="row">
                <a href="{{url2}}" class="fs-4 fw-semibold" onclick="window.open(this.href); return false">서버 기반 리모콘</a>
            </th>
            <td>
                {% if state2 == 200 %}
                <div class="color d-grid gap-2 col-6">
                    <button type="button" class="btn btn-success btn-lg">Success</button>
                </div>
                {% else %}
                <div class="color d-grid gap-2 col-6"> 
                    <button type="button" class="btn btn-danger btn-lg">Warning</button>
                </div>
                {% endif %}
            </td>
            <td class="fs-5 fw-semibold">{{state2}}</td>
            <td class="fs-5 fw-semibold">서버가 클라이언트의 요청 구문을 인식할 수 없습니다</td>
          </tr>
        </tbody>
    </table>
</body>
</html>